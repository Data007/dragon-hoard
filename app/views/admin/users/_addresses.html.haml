.addresses
  %strong Addresses
  - @user.addresses.each do |address|
    .address{id: dom_id(address)}
      = address.to_single_line
      %span.remove= link_to 'delete', admin_user_address_path(@user.pretty_id, address), method: :delete, confirm: 'Are you sure you want to delete this address?'
  %hr
  #add_address= link_to 'new address', new_admin_user_address_path(@user.pretty_id)

#add_address_module.module
  #address_form.window
    %h1 Add a New Address
    = form_for @user.addresses.new, url: admin_user_addresses_path(@user.pretty_id) do |address_form|
      .field.required
        = address_form.label       :address_1
        = address_form.text_field  :address_1
      .field
        = address_form.label       :address_2
        = address_form.text_field  :address_2
      .field.required
        = address_form.label       :city
        = address_form.text_field  :city
      .field.required
        = address_form.label       :province
        = address_form.text_field  :province
      .field.required
        = address_form.label       :postal_code
        = address_form.text_field  :postal_code
      .field.required
        = address_form.label       :country
        = address_form.text_field  :country
      .field
        #cancel_address.acts_as_button cancel address
        = address_form.submit "add new address", class: "submit button"

:javascript
  function setup_add_address() {
    $("#add_address_module").hide();
    $("#add_address a:first")
      .click(function(){
        $("#add_address_module").show();
        return false;
      });
    $("#cancel_address")
      .click(function(){
        $("#add_address_module").hide();
        return false;
      });
    $("#address_form form:first")
      .submit(function(){
        
      });
  }
  
  $(document).ready(function(){
    setup_add_address();
  });
